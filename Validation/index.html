<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Validation Techniques - MISCnn wiki</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="..">MISCnn wiki</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../Home/">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../Home/">What is MIScnn?</a>
</li>
                                    
<li >
    <a href="../Install/">Install</a>
</li>
                                    
<li >
    <a href="../Usage/">Basic Usage</a>
</li>
                                    
<li >
    <a href="../Tutorials/">Tutorials</a>
</li>
                                    
<li >
    <a href="../Examples/">Examples</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation - Core <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../Data-IO/">Data I/O</a>
</li>
                                    
<li >
    <a href="../Preprocessor/">Preprocessor</a>
</li>
                                    
<li >
    <a href="../Data-Augmentation/">Data Augmentation</a>
</li>
                                    
<li >
    <a href="../Model/">Neural Network Model</a>
</li>
                                    
<li class="active">
    <a href="./">Validation Techniques</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation - Interfaces <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../Architectures/">Architectures</a>
</li>
                                    
<li >
    <a href="../Metrics/">Metrics</a>
</li>
                                    
<li >
    <a href="../Subfunctions/">Subfunctions</a>
</li>
                                    
<li >
    <a href="../IO-Interfaces/">I/O Interfaces</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation - Extras <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../Sample/">Sample</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Other <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../Contribute/">How to Contribute</a>
</li>
                                    
<li >
    <a href="../Credits/">Author and Contacts</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../Model/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../Architectures/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#methods">Methods</a></li>
            <li><a href="#k-fold-cross-validation">k-fold Cross-Validation</a></li>
            <li><a href="#percentage-split-validation">Percentage-Split Validation</a></li>
            <li><a href="#leave-one-out-validation">Leave-One-Out Validation</a></li>
            <li><a href="#detailed-validation">Detailed Validation</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p>The validation is one of the key steps in any medical image analysis. The aim of the validation is to utilize the fitted model in order to provide an unbiased performance evaluation of it. The resulting validation performance can be an indicator for overfitting to the training data or the need of hyperparameter adjustment.</p>
<p>MIScnn provides the following three popular validation techniques: Cross-Validation, Percentage-Split Validation and Leave-One-Out Validation.</p>
<h2 id="methods">Methods</h2>
<h4 id="k-fold-cross-validation">k-fold Cross-Validation</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">cross_validation</span><span class="p">(</span><span class="n">sample_list</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">k_fold</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">epochs</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                 <span class="n">iterations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">evaluation_path</span><span class="o">=</span><span class="s2">&quot;evaluation&quot;</span><span class="p">,</span>
                 <span class="n">draw_figures</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">run_detailed_evaluation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">callbacks</span><span class="o">=</span><span class="p">[],</span> <span class="n">save_models</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">direct_output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Function for an automatic k-fold Cross-Validation of the Neural Network model by running the whole pipeline several times with different data set combinations.</p>
<p><strong>Arguments:</strong><br />
- <strong>sample_list:</strong> A list of sample indicies which will be used for validation.
- <strong>model:</strong> Instance of a Neural Network model class instance.
- <strong>k_fold:</strong> The number of k-folds for the Cross-Validation.
- <strong>epochs:</strong> Number of epochs. A single epoch is defined as one iteration through the complete data set.
- <strong>iterations:</strong> Number of iterations (batches) in a single epoch.
- <strong>evaluation_path:</strong> Path to the evaluation data directory. This directory will be created and used for storing all kinds of evaluation results during the validation processes.
- <strong>draw_figures:</strong> Boolean, whether evaluation figures should be automatically plotted in the evaluation directory.
- <strong>run_detailed_evaluation:</strong> Boolean, whether a detailed evaluation (additional prediction) should be performed.
- <strong>callbacks:</strong> A list of Callback classes for custom evaluation.
- <strong>save_models:</strong> Boolean, whether fitted models should be stored or thrown away.
- <strong>direct_output:</strong> Boolean, whether computed evaluations will be output as the return of this function or if the evaluations will be saved on disk in the evaluation directory.</p>
<p><strong>Returns:</strong><br />
None or validation results if direct_output is true. The variable validation_results is a list of Keras History objects containing all kinds of information. For each fold, a history object will created and appended to the list.</p>
<p><strong>Example:</strong>  </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">miscnn</span><span class="o">.</span><span class="n">Neural_Network</span><span class="p">(</span><span class="n">preprocessor</span><span class="o">=</span><span class="n">pp</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">miscnn.evaluation</span> <span class="kn">import</span> <span class="n">cross_validation</span>
<span class="n">cross_validation</span><span class="p">(</span><span class="n">sample_list</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">k_fold</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">epochs</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<hr />
<h4 id="percentage-split-validation">Percentage-Split Validation</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">split_validation</span><span class="p">(</span><span class="n">sample_list</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">percentage</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">epochs</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                 <span class="n">iterations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">evaluation_path</span><span class="o">=</span><span class="s2">&quot;evaluation&quot;</span><span class="p">,</span>
                 <span class="n">draw_figures</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">run_detailed_evaluation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">callbacks</span><span class="o">=</span><span class="p">[],</span> <span class="n">direct_output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Function for an automatic Percentage-Split Validation of the Neural Network model by running the whole pipeline once with a test and train data set.</p>
<p><strong>Arguments:</strong><br />
- <strong>sample_list:</strong> A list of sample indicies which will be used for validation.
- <strong>model:</strong> Instance of a Neural Network model class instance.
- <strong>percentage:</strong> Testing set percentage of the whole sample list size.
- <strong>epochs:</strong> Number of epochs. A single epoch is defined as one iteration through the complete data set.
- <strong>iterations:</strong> Number of iterations (batches) in a single epoch.
- <strong>evaluation_path:</strong> Path to the evaluation data directory. This directory will be created and used for storing all kinds of evaluation results during the validation processes.
- <strong>draw_figures:</strong> Boolean, whether evaluation figures should be automatically plotted in the evaluation directory.
- <strong>run_detailed_evaluation:</strong> Boolean, whether a detailed evaluation (additional prediction) should be performed.
- <strong>callbacks:</strong> A list of Callback classes for custom evaluation.
- <strong>direct_output:</strong> Boolean, whether computed evaluations will be output as the return of this function or if the evaluations will be saved on disk in the evaluation directory.</p>
<p><strong>Returns:</strong><br />
None or a Keras History objects if direct_output is true.</p>
<p><strong>Example:</strong>  </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">miscnn</span><span class="o">.</span><span class="n">Neural_Network</span><span class="p">(</span><span class="n">preprocessor</span><span class="o">=</span><span class="n">pp</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">miscnn.evaluation</span> <span class="kn">import</span> <span class="n">split_validation</span>
<span class="n">split_validation</span><span class="p">(</span><span class="n">sample_list</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">percentage</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">epochs</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<hr />
<h4 id="leave-one-out-validation">Leave-One-Out Validation</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">leave_one_out</span><span class="p">(</span><span class="n">sample_list</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">epochs</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
              <span class="n">callbacks</span><span class="o">=</span><span class="p">[],</span> <span class="n">evaluation_path</span><span class="o">=</span><span class="s2">&quot;evaluation&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Function for an automatic Leave-One-Out Validation of the Neural Network model by running the whole pipeline once by training on the complete data set except one sample and then predict the segmentation of the last remaining sample.</p>
<p><strong>Arguments:</strong><br />
- <strong>sample_list:</strong> A list of sample indicies which will be used for validation.
- <strong>model:</strong> Instance of a Neural Network model class instance.
- <strong>epochs:</strong> Number of epochs. A single epoch is defined as one iteration through the complete data set.
- <strong>iterations:</strong> Number of iterations (batches) in a single epoch.
- <strong>callbacks:</strong> A list of Callback classes for custom evaluation.
- <strong>evaluation_path:</strong> Path to the evaluation data directory. This directory will be created and used for storing all kinds of evaluation results during the validation processes.</p>
<p><strong>Returns:</strong>  None.</p>
<p><strong>Example:</strong>  </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">miscnn</span><span class="o">.</span><span class="n">Neural_Network</span><span class="p">(</span><span class="n">preprocessor</span><span class="o">=</span><span class="n">pp</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">miscnn.evaluation</span> <span class="kn">import</span> <span class="n">detailed_validation</span>
<span class="n">detailed_validation</span><span class="p">(</span><span class="n">sample_list</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">evaluation_path</span><span class="o">=</span><span class="s2">&quot;evaluation&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<hr />
<h4 id="detailed-validation">Detailed Validation</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">detailed_validation</span><span class="p">(</span><span class="n">validation_samples</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">evaluation_path</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Function for detailed validation of a validation sample data set. The segmentation of these samples will be predicted with an already fitted model and evaluated.<br />
Normally, this method will be called automatically inside one of the three validation techniques. Nevertheless, it is possible to use the detailed validation method manually.</p>
<p>Be aware, that this function only predicts and evaluates the given samples. The detailed validation does NOT include any training process.</p>
<p><strong>Arguments:</strong><br />
- <strong>validation_samples:</strong> A list of sample indicies which will be used for validation.
- <strong>model:</strong> Instance of a Neural Network model class instance.
- <strong>evaluation_path:</strong> Path to the evaluation data directory. This directory will be created and used for storing all kinds of evaluation results during the validation processes.</p>
<p><strong>Returns:</strong>  None.</p>
<p><strong>Example:</strong>  </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">miscnn</span><span class="o">.</span><span class="n">Neural_Network</span><span class="p">(</span><span class="n">preprocessor</span><span class="o">=</span><span class="n">pp</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">miscnn.evaluation.detailed_validation</span> <span class="kn">import</span> <span class="n">detailed_validation</span>
<span class="n">detailed_validation</span><span class="p">(</span><span class="n">validation_samples</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">evaluation_path</span><span class="o">=</span><span class="s2">&quot;evaluation&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<hr /></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
